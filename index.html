<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CS2 Prime Account Generator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap');

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      font-family: 'Rubik', sans-serif;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      background: rgba(255, 255, 255, 0.06);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 16px;
      padding: 40px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    h2 {
      margin-bottom: 20px;
      font-size: 28px;
      color: #00ffe0;
    }

    p {
      margin-bottom: 20px;
    }

    input[type="text"] {
      padding: 10px;
      width: 80%;
      border: none;
      border-radius: 5px;
      margin-bottom: 15px;
      text-align: center;
      font-size: 16px;
    }

    .error {
      color: #ff5c5c;
      margin-top: 10px;
    }

    button {
      padding: 12px 24px;
      font-size: 16px;
      margin: 10px 6px;
      background: #00ffe0;
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s ease;
      font-weight: 600;
    }

    button:hover {
      background-color: #00ccbb;
      transform: scale(1.05);
    }

    #backBtn {
      background-color: #666;
      color: #fff;
    }

    #backBtn:hover {
      background-color: #888;
    }

    #output {
      margin-top: 25px;
      font-size: 17px;
      background: rgba(0, 0, 0, 0.2);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      user-select: text;
    }

    #password {
      font-family: monospace;
      letter-spacing: 3px;
    }

    /* 🔄 Loading Spinner */
    .spinner {
      display: none;
      margin: 20px auto;
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid #00ffe0;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>CS2 Prime Account Generator</h2>

    <div id="landing">
      <p>Enter Access Code to continue:</p>
      <input type="text" id="accessCode" placeholder="Enter access code" />
      <br />
      <button id="startBtn">Continue</button>
      <div id="errorMsg" class="error"></div>
    </div>

    <div id="generator" style="display:none;">
      <button id="generateBtn">Generate Account</button>
      <button id="backBtn">Back</button>
      <div class="spinner" id="loader"></div>
      <div id="output">Click "Generate Account" to get one.</div>
    </div>
  </div>

  <script>
    const accessCodeRequired = "jdghdufhjfdohjf";
    const pastebinRawUrl = 'https://pastebin.com/raw/hFwfvmfi';
    const proxyUrl = 'https://api.allorigins.win/get?url=';
    let currentPassword = '';

    async function fetchRandomAccount() {
      const output = document.getElementById('output');
      const loader = document.getElementById('loader');

      loader.style.display = 'block';
      output.style.display = 'none';

      // Start both the fetch and the timer
      const fetchPromise = fetch(proxyUrl + encodeURIComponent(pastebinRawUrl))
        .then(res => res.json())
        .then(data => {
          const lines = data.contents.trim().split('\n');
          const randomLine = lines[Math.floor(Math.random() * lines.length)];
          const [username, password] = randomLine.split(':');
          if (!username || !password) throw new Error("Invalid format");
          return { username: username.trim(), password: password.trim() };
        });

      const delayPromise = new Promise(resolve => setTimeout(resolve, 5000));

      try {
        const [account] = await Promise.all([fetchPromise, delayPromise]);
        currentPassword = account.password;
        output.innerHTML = `
          <strong>Username:</strong> ${account.username}<br>
          <strong>Password:</strong> <span id="password">${'•'.repeat(currentPassword.length)}</span>
          <br><button onclick="togglePassword(this)">Show Password</button>
        `;
        copyToClipboard(`${account.username}:${currentPassword}`);
      } catch (err) {
        output.innerHTML = `<span style="color:red">Failed to load account.</span>`;
        console.error(err);
      }

      loader.style.display = 'none';
      output.style.display = 'block';
    }

    function togglePassword(button) {
      const pw = document.getElementById('password');
      if (button.textContent === 'Show Password') {
        pw.textContent = currentPassword;
        button.textContent = 'Hide Password';
      } else {
        pw.textContent = '•'.repeat(currentPassword.length);
        button.textContent = 'Show Password';
      }
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).catch(err => {
        console.error('Failed to copy:', err);
      });
    }

    document.getElementById('startBtn').onclick = () => {
      const codeInput = document.getElementById('accessCode').value.trim();
      const errorMsg = document.getElementById('errorMsg');

      if (codeInput === accessCodeRequired) {
        errorMsg.textContent = '';
        document.getElementById('landing').style.display = 'none';
        document.getElementById('generator').style.display = 'block';
      } else {
        errorMsg.textContent = '❌ Wrong access code';
      }
    };

    document.getElementById('generateBtn').onclick = fetchRandomAccount;

    document.getElementById('backBtn').onclick = () => {
      document.getElementById('generator').style.display = 'none';
      document.getElementById('landing').style.display = 'block';
      document.getElementById('output').textContent = 'Click "Generate Account" to get one.';
      document.getElementById('accessCode').value = '';
      document.getElementById('errorMsg').textContent = '';
    };
  </script>
</body>
</html>
